<!-- contains format for client survey -->

<!-- client facing html files -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Friendliest Friend Finder</title>
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="./style.css" />

    <link
      href="https://fonts.googleapis.com/css?family=Prompt|Quicksand&display=swap"
      rel="stylesheet"
    />

    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="container">
      <h1>Truth or Dare</h1>

      <hr />
      <h3><strong>All about YOU</strong></h3>
      <h4>Name (Required)</h4>
      <input type="text" name="" id="name" class="form-control" required />

      <h4>Your favorite city (Required)</h4>
      <input type="text" name="" id="name" class="form-control" required />
      <hr />

      <!-- QUESTIONS -->

      <h3><strong>Question 1.</strong></h3>
      <h4>Fitness, diet and exercise are very important to your lifestyle.</h4>
      <select data-placeholder="" class="chosen-select" id="qst1">
        <option value=""></option>
        <option value="1">1 (ABSOLUTELY agree)</option>
        <option value="2">2 (somewhat agree)</option>
        <option value="3">3 (indifferent)</option>
        <option value="4">4 (somewhat disagree)</option>
        <option value="5">5 (STRONGLY disagree)</option>
      </select>

      <h3><strong>Question 2.</strong></h3>
      <h4>You are a competitive person who thrives under pressure.</h4>
      <select data-placeholder="" class="chosen-select" id="qst2">
        <option value=""></option>
        <option value="1">1 (ABSOLUTELY agree)</option>
        <option value="2">2 (somewhat agree)</option>
        <option value="3">3 (indifferent)</option>
        <option value="4">4 (somewhat disagree)</option>
        <option value="5">5 (STRONGLY disagree)</option>
      </select>

      <h3><strong>Question 3.</strong></h3>
      <h4>
        You have a keen interest in astrology and other peoples astrological
        signs & charts.
      </h4>
      <select data-placeholder="" class="chosen-select" id="qst3">
        <option value=""></option>
        <option value="1">1 (ABSOLUTELY agree)</option>
        <option value="2">2 (somewhat agree)</option>
        <option value="3">3 (indifferent)</option>
        <option value="4">4 (somewhat disagree)</option>
        <option value="5">5 (STRONGLY disagree)</option>
      </select>

      <h3><strong>Question 4.</strong></h3>
      <h4>You are an avid sports fan.</h4>
      <select data-placeholder="" class="chosen-select" id="qst4">
        <option value=""></option>
        <option value="1">1 (ABSOLUTELY agree)</option>
        <option value="2">2 (somewhat agree)</option>
        <option value="3">3 (indifferent)</option>
        <option value="4">4 (somewhat disagree)</option>
        <option value="5">5 (STRONGLY disagree)</option>
      </select>

      <h3><strong>Question 5.</strong></h3>
      <h4>Happy hour is your HAPPIEST hour!</h4>
      <select data-placeholder="" class="chosen-select" id="qst5">
        <option value=""></option>
        <option value="1">1 (ABSOLUTELY agree)</option>
        <option value="2">2 (somewhat agree)</option>
        <option value="3">3 (indifferent)</option>
        <option value="4">4 (somewhat disagree)</option>
        <option value="5">5 (STRONGLY disagree)</option>
      </select>

      <h3><strong>Question 6.</strong></h3>
      <h4>
        You consider yourself to be a lifelong learner and reader.
      </h4>
      <select data-placeholder="" class="chosen-select" id="qst6">
        <option value=""></option>
        <option value="1">1 (ABSOLUTELY agree)</option>
        <option value="2">2 (somewhat agree)</option>
        <option value="3">3 (indifferent)</option>
        <option value="4">4 (somewhat disagree)</option>
        <option value="5">5 (STRONGLY disagree)</option>
      </select>

      <h3><strong>Question 7.</strong></h3>
      <h4>Having a very busy social life energizes you.</h4>
      <select data-placeholder="" class="chosen-select" id="qst7">
        <option value=""></option>
        <option value="1">1 (ABSOLUTELY agree)</option>
        <option value="2">2 (somewhat agree)</option>
        <option value="3">3 (indifferent)</option>
        <option value="4">4 (somewhat disagree)</option>
        <option value="5">5 (STRONGLY disagree)</option>
      </select>

      <h3><strong>Question 8.</strong></h3>
      <h4>Going to cultural events is a favorite pasttime.</h4>
      <select data-placeholder="" class="chosen-select" id="qst8">
        <option value=""></option>
        <option value="1">1 (ABSOLUTELY agree)</option>
        <option value="2">2 (somewhat agree)</option>
        <option value="3">3 (indifferent)</option>
        <option value="4">4 (somewhat disagree)</option>
        <option value="5">5 (STRONGLY disagree)</option>
      </select>

      <h3><strong>Question 9.</strong></h3>
      <h4>
        You would rather "mellow out" on vacation (at a beach or spa) rather
        than sightsee.
      </h4>
      <select data-placeholder="" class="chosen-select" id="qst9">
        <option value=""></option>
        <option value="1">1 (ABSOLUTELY agree)</option>
        <option value="2">2 (somewhat agree)</option>
        <option value="3">3 (indifferent)</option>
        <option value="4">4 (somewhat disagree)</option>
        <option value="5">5 (STRONGLY disagree)</option>
      </select>

      <h3><strong>Question 10.</strong></h3>
      <h4>You believe in a power greater than yourself.</h4>
      <select data-placeholder="" class="chosen-select" id="qst10">
        <option value=""></option>
        <option value="1">1 (ABSOLUTELY agree)</option>
        <option value="2">2 (somewhat agree)</option>
        <option value="3">3 (indifferent)</option>
        <option value="4">4 (somewhat disagree)</option>
        <option value="5">5 (STRONGLY disagree)</option>
      </select>

      <h3><strong>Question 11.</strong></h3>
      <h4>
        You live by the credo that "what happens in Vegas, stays in Vegas"!
      </h4>
      <select data-placeholder="" class="chosen-select" id="qst11">
        <option value=""></option>
        <option value="1">1 (ABSOLUTELY agree)</option>
        <option value="2">2 (somewhat agree)</option>
        <option value="3">3 (indifferent)</option>
        <option value="4">4 (somewhat disagree)</option>
        <option value="5">5 (STRONGLY disagree)</option>
      </select>

      <br />
      <br />

      <button
        type="submit"
        class="btn btn-primary btn-lg btn-block"
        id="submit"
      >
        <i class="fa fa_check-circle" aria-hidden="true"></i>Submit
      </button>
      <br />
      <br />
    </div>
    <footer id="footer">
      <p>
        <a
          href="
          https://friendliest-friend-finder.herokuapp.com"
          >API Friendly Friend Finder</a
        >
        | <a href="https://github.com/lizlevine"> GitHub Repo</a>
      </p>
      <div class="copyright">
        &copy; copyright 2020 elizabeth levine
      </div>
    </footer>

    <!-- Modal -->
    <div class="modal fade" id="resultsModal" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title"><strong>Your BFF Match!</strong></h2>
          </div>
          <div class="modal-body">
            <h2 id="matchName"></h2>
            <img id="matchImg" src="" alt="" />
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
      // capture the form inputs

      $("#submit").on("click", function (event) {
        event.preventDefault();

        function validateForm() {
          var isValid = true;
          $(".form-control").each(function () {
            if ($(this).val() === "") {
              isValid = false;
            }
          });
          $(".chosen-select").each(function () {
            if ($(this).val() === "") {
              isValid = false;
            }
          });
          return isValid;
        }

        // if all required field are filled / function call can be within an if statement
        if (validateForm()) {
          // if (valid === true) {
          // create an object for the user's data

          var userData = {
            name: $("#name").val(),
            photo: $("#photo").val(),
            scores: [
              $("#qst1").val(),
              $("#qst2").val(),
              $("#qst3").val(),
              $("#qst4").val(),
              $("#qst5").val(),
              $("#qst6").val(),
              $("#qst7").val(),
              $("#qst8").val(),
              $("#qst9").val(),
              $("#qst10").val(),
              $("#qst11").val(),
            ],
          };

          // validateForm()

          // capture website URL
          var currentURL = window.location.origin;

          // AJAX POST the data to the friends API
          $.post(currentURL + "/api/friends", userData, function (data) {
            $("#matchName").text(data.name);
            $("#matchImg").attr("src", data.photo);
            $("#resultsModal").modal("toggle");
          });
        } else {
          alert("Please fill out all fields before submitting.");
        }

        return false;
      });
    </script>
  </body>
</html>
